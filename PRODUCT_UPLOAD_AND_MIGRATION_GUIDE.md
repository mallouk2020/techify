# ๐ฆ ุฏููู ุฑูุน ุงูููุชุฌุงุช ูุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ูุธุฑุฉ ุนุงูุฉ
- **ูุทุงู ุงูุฏููู**: ูุดุฑุญ ูุฐุง ุงูููู ููููุฉ ุฅุนุฏุงุฏ ุงููุฎุทุท (Schema)ุ ุฅุฏุงุฑุฉ ุงููุฌุฑุงุช (Migrations)ุ ูุงูุชุนุงูู ูุน ูุงุฌูุงุช ุงูู API ุงููุฑุชุจุทุฉ ุจุฑูุน ุงูููุชุฌุงุช ุชููุงุฆููุง ูู ูุดุฑูุน Techify.
- **ุฎูููุฉ**: ูุฌูุน ูุฐุง ุงูุฏููู ุงููุนูููุงุช ุงูููุซููุฉ ูู `README.md` ุจุนุฏ ูุฑุงุฌุนุชูุง ูุชุญุฏูุซูุง ูุชุชูุงูู ูุน ุงูุจููุฉ ุงูุญุงููุฉ ูููุดุฑูุน.

## ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช (Prisma Schema)
### ูููุฐุฌ ุงูููุชุฌ Product
- **ุงููุตุฏุฑ**: `server/prisma/schema.prisma:11-31`
- **ุงูุญููู ุงูุฃุณุงุณูุฉ**:
  - `id` (UUID ุชููุงุฆู)
  - `slug` (ูุฑูุฏ)
  - `title`
  - `mainImage`
  - `price` (ุงูุชุฑุงุถู 0)
  - `description`
  - `manufacturer`
  - `categoryId`
- **ุญููู ุงููุฎุฒูู ูุงูุชูููู**:
  - `inStock` (ุงูุชุฑุงุถู 1)
  - `stock` (ุงุฎุชูุงุฑู)
  - `rating` (ุงูุชุฑุงุถู 0)
  - `ratingCount` (ุงุฎุชูุงุฑู)
- **ูุฌุงูุงุช ุฅุถุงููุฉ**:
  - `oldPrice`, `colors`, `sizes`, `shippingCost`
- **ุงูุนูุงูุงุช**:
  - `category` โ `Category`
  - `customerOrders` โ `customer_order_product`
  - `Wishlist` โ `Wishlist`

### ููุงุฐุฌ ูุณุงูุฏุฉ ูููุฉ
- **Category**: ุฑุจุท ุงูููุชุฌุงุช ุจุงููุฆุงุช ูุน ุญูู `name` ุงููุฑูุฏ `server/prisma/schema.prisma:88-92`.
- **Image**: ูุญูุธ ุตูุฑ ุฅุถุงููุฉ ูุฑุชุจุทุฉ ุจุงูููุชุฌ `server/prisma/schema.prisma:33-37`.
- **customer_order_product**: ูุชุถูู ุงูุญููู `selectedColor` ู`selectedSize` ูุชูุงุตูู ุงูุทูุจ `server/prisma/schema.prisma:77-86`.

## ุฅุฏุงุฑุฉ ุงููุฌุฑุงุช (Migrations)
### ุฃูุงูุฑ Prisma ุงูููุงุณูุฉ
1. **ุชูููุฏ ุงูุนููู**:
   ```bash
   cd server
   npx prisma generate
   ```
2. **ุฅูุดุงุก Migration ุฌุฏูุฏ ุฃุซูุงุก ุงูุชุทููุฑ**:
   ```bash
   cd server
   npx prisma migrate dev --name "ุงุณู-ุงูุชุนุฏูู"
   ```
3. **ุชุทุจูู ุงููุฌุฑุงุช ุงูููุฌูุฏุฉ ุนูู ุจูุฆุฉ ุงูุฅูุชุงุฌ**:
   ```bash
   cd server
   npx prisma migrate deploy
   ```
- **ุชุญุฐูุฑ**: ูุง ุชุณุชุฎุฏู `npx prisma db push` ุนูู ูุงุนุฏุฉ ุจูุงูุงุช ุชุญุชูู ุจูุงูุงุช ููุชุฌุฉ (ุฑุงุฌุน `README.md:372-402`).

### ุณูุฑุจุช ุงููุฌุฑุฉ ุงูุฎุงุต ุจู Railway
- **ุงููุตุฏุฑ**: `server/migrate-railway.js:10-188`.
- **ุงูููุงู**:
  - ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ `oldPrice`, `ratingCount`, `stock`, `colors`, `sizes`, `shippingCost` ุฅูู ุฌุฏูู `Product` ุนูุฏ ุงูุญุงุฌุฉ.
  - ุฅุถุงูุฉ `selectedColor`, `selectedSize` ูุฌุฏูู `customer_order_product`.
  - ุฅูุดุงุก ุฌุฏูู `HeroSection` ูุชุนุจุฆุชู ุจุจูุงูุงุช ุงูุชุฑุงุถูุฉ ุฅู ูุงู ูุงุฑุบูุง.
  - ุชุญุฏูุซ ุฌุฏูู `User` ุจุญููู `name`, `phone`, `address`, `createdAt`, `updatedAt`.
  - ุฑุจุท `Customer_order` ุจุงููุณุชุฎุฏู ุนุจุฑ `userId` ูุน ููุฑุณ ูููุชุงุญ ุฃุฌูุจู.
- **ุงูุชุดุบูู**: ูุชู ุงุณุชุฏุนุงุก ุงูุณูุฑุจุช ูู `server/package.json` ุนุจุฑ ุณูุฑุจุช `postinstall` ูุถูุงู ุงูุชูุงูู ูุน ุจูุฆุฉ Railway.

## ูุงุฌูุงุช ุงูู API ุงูุฎุงุตุฉ ุจุงูููุชุฌุงุช
### ุงููุณุงุฑุงุช ุงูุฑุฆูุณูุฉ
- **ููู ุงูุฑุงูุชุฑ**: `server/routes/products.js:3-20`.
- **ุงููุณุงุฑุงุช ุงููุชุงุญุฉ**:
  1. `GET /api/products` โ ูุฏุนู ุงูุชุตููุฉุ ุงููุฑุฒุ ูุงูุตูุญุงุช. ุงุณุชุฎุฏู `mode=admin` ููุญุตูู ุนูู ุงููุงุฆูุฉ ูุงููุฉ ุจุฏูู ูููุฏ (`server/controllers/products.js:72-246`).
  2. `POST /api/products` โ ุฅูุดุงุก ููุชุฌ ุฌุฏูุฏ (`server/controllers/products.js:262-306`).
  3. `GET /api/products/:id` โ ุงุณุชุฑุฌุงุน ููุชุฌ ูุญุฏุฏ ูุน ุจูุงูุงุช ุงููุฆุฉ (`server/controllers/products.js:432-452`).
  4. `PUT /api/products/:id` โ ุชุญุฏูุซ ููุชุฌ (`server/controllers/products.js:308-369`).
  5. `DELETE /api/products/:id` โ ุญุฐู ููุชุฌ ูุน ุชูุธูู ุงูุนูุงูุงุช (`server/controllers/products.js:372-399`).
  6. `GET /api/search?query=` โ ุจุญุซ ูุตู ูู ุงูุนููุงู ูุงููุตู (`server/controllers/products.js:405-429`).

### ูููุฐุฌ ุทูุจ ุฅูุดุงุก ููุชุฌ
```json
{
  "slug": "unique-product-slug",
  "title": "Product Title",
  "mainImage": "https://...",
  "price": 350,
  "oldPrice": 420,
  "rating": 5,
  "ratingCount": 12,
  "description": "Detailed description",
  "manufacturer": "Brand",
  "categoryId": "existing-category-uuid",
  "inStock": 1,
  "stock": 50,
  "colors": "[\"black\", \"silver\"]",
  "sizes": "[\"128GB\", \"256GB\"]",
  "shippingCost": 25
}
```
- **ุญููู ูุทููุจุฉ**: `slug`, `title`, `mainImage`, `price`, `categoryId`.
- **ุชูุณูู ุงูุญููู ุงููุฑูุจุฉ**: ูุชู ุฅุฑุณุงู `colors` ู`sizes` ูุณูุงุณู JSON ูุธุฑูุง ูุชุนุฑูููุง ูุณูุงุณู ูุตูุฉ ูู ุงููุฎุทุท.
- **ุงููุฎุฑุฌุงุช**: ูุนูุฏ ุงููููุฐุฌ ูุงูู ุงูุจูุงูุงุช ุจูุง ูู ุฐูู ุงููุนุฑู UUID ุงูุฌุฏูุฏ.

### ุงุนุชุจุงุฑุงุช ุฃูููุฉ ููุญุฏุฏุงุช ุงููุงุฌูุฉ
- **ุชุตููุฉ ุขููุฉ**: ูุชู ุงูุชุญูู ูู ุฃููุงุน ุงูููุงุชุฑ ูุงููุดุบููู (`server/controllers/products.js:4-170`).
- **ูุญุฏุฏุงุช ุงููุฑุฒ**: ูุฌููุนุฉ ูุญุฏุฏุฉ ูุณุจููุง (`defaultSort`, `titleAsc`, `titleDesc`, `lowPrice`, `highPrice`).
- **ุงููุญุฏุฏุงุช ูููุฎุฒูู**: ุงุณุชุฎุฏู `filters[inStock][equals]=1` ุฃู `filters[outOfStock][equals]=1` ูุงูุชูุงุก ุงููุชุงุฆุฌ.

## ุฎุทูุงุช ุงูุจูุช ูุฑูุน ููุชุฌ ุฌุฏูุฏ
1. **ุงูุญุตูู ุนูู ูุนุฑู ุงููุฆุฉ**:
   - ูุฏุงุก `GET /api/categories`ุ ุซู ุงุฎุชูุงุฑ ุงููุฆุฉ ุงูููุงุณุจุฉ.
2. **ุชุญุถูุฑ ุจูุงูุงุช ุงูููุชุฌ**:
   - ุชุฃูุฏ ูู ูุฌูุฏ ุตูุฑุฉ ุฑุฆูุณูุฉ (`mainImage`) ุนูู Cloudinary ุฃู ุชู ุฑูุนูุง ูุณุจููุง ุนุจุฑ `POST /api/main-image`.
   - ูู ุจุชุญููู ุงูููุงุฆู ูุซู ุงูุฃููุงู ูุงูุฃุญุฌุงู ุฅูู JSON string.
3. **ุฅุฑุณุงู ุงูุทูุจ**:
   - ุงุณุชุฎุฏู `POST /api/products` ุจุงูุญููู ุงููุทููุจุฉ.
4. **ุงูุชุญูู**:
   - ุงุณุชุฏุนู `GET /api/products?mode=admin` ุฃู `GET /api/products/:id` ููุชุฃูุฏ ูู ูุฌุงุญ ุงูุฅุฏุฎุงู.
5. **ุชุญุฏูุซุงุช ูุงุญูุฉ** (ุงุฎุชูุงุฑู):
   - ูุชุนุฏูู ุญูู ูุงุญููุง ุงุณุชุฎุฏู `PUT /api/products/:id` ุจููุณ ุงูุจููุฉ.
6. **ุชูุธูู ุงูุนูุงูุงุช ุนูุฏ ุงูุญุฐู**:
   - ุงุณุชุฏุนุงุก `DELETE /api/products/:id` ุณูุญุฐู ุชููุงุฆููุง ุงูุณุฌูุงุช ุงููุชุนููุฉ ุจุงูุทูุจุงุช ูุงูููุงุฆู ุงูุฃูููุฉ ุญุณุจ ุงูููุทู ูู `server/controllers/products.js:380-392`.

## ุชุดุบูู ุงููุฌุฑุงุช ูู ุจูุฆุงุช ูุฎุชููุฉ
1. **ุงูุจูุฆุฉ ุงููุญููุฉ**:
   - ุทุจู `npx prisma migrate dev` ุจุนุฏ ุฃู ุชุนุฏูู ุนูู `schema.prisma`.
   - ุงุณุชุฎุฏู `npx prisma studio` ููุชุฃูุฏ ูู ุงูุจูุงูุงุช.
2. **ุจูุฆุฉ ุงูุฅูุชุงุฌ (Railway)**:
   - ุชุฃูุฏ ูู ุฃู ุณูุฑุจุช `migrate-railway.js` ููุญุฏูุซ ููุญุชูู ุนูู ุงูุชุนุฏููุงุช ุงูุฌุฏูุฏุฉ.
   - ุนูุฏ ุงููุดุฑุ ูุชู ุชูููุฐ ุงูุณูุฑุจุช ุนุจุฑ `postinstall` ููุถูู ุงูุฃุนูุฏุฉ ุนูุฏ ุงูุญุงุฌุฉ.
   - ูููู ุชุดุบููู ูุฏูููุง ุนูุฏ ุงูุถุฑูุฑุฉ:
     ```bash
     cd server
     node migrate-railway.js
     ```
3. **ุงูุชุญูู ุจุนุฏ ุงููุดุฑ**:
   - ุฑุงูุจ ุณุฌูุงุช Railway ููุชุฃูุฏ ูู ุธููุฑ ุฑุณุงุฆู `โ Migration completed successfully!`.
   - ุงุฎุชุจุฑ ูุงุฌูุฉ `GET /api/products` ููุชุฃูุฏ ูู ูุฌูุฏ ุงูุญููู ุงูุฌุฏูุฏุฉ.

## ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ุงูุถุฑูุฑูุฉ
- **`DATABASE_URL`**: ูุทููุจ ูุชุดุบูู Prisma ูุน SSL (ุฑุงุฌุน `server/utills/db.js:4-33`).
- **ุนูุงููู ุงูู API ุงูุนุงูุฉ**: ูุฌุจ ุฃู ูุดูุฑ `NEXT_PUBLIC_API_BASE_URL` ุฅูู ุฎุงุฏู Railway ุงููุดุท (`README.md:221-240`).

## ูุงุฆูุฉ ุชุญูู ููุฑูุน ุงูุขูู
1. **ุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุงููุฏุฎูุฉ** (ุนุฏู ุชูุฑุงุฑ `slug`, ุงูุชุฃูุฏ ูู `categoryId`).
2. **ุชุฃูุฏ ูู ุชุญุฏูุซ ุงููุฎุทุท ูุญูููุง ูุชุดุบูู ุงููุฌุฑุงุช**.
3. **ุฑุงูุจ ุชูููุฐ ุณูุฑุจุช ุงููุฌุฑุฉ ุนูุฏ ุงููุดุฑ**.
4. **ุงุฎุชุจุฑ ููุทุฉ ุงูููุงูุฉ `/api/products` ุจุนุฏ ุฃู ุชุนุฏูู ูุจูุฑ**.
5. **ุงุญูุธ ุณุฌู ุงูุทูุจุงุช ุงููุงุฌุญุฉ ูุงููุงุดูุฉ ููุจูุช ูุชุญููู ุงููุดุงูู**.

## ูุตุงุฏุฑ ุฅุถุงููุฉ
- **ุงูุชุญูู ูู ุงูุงุชุตุงู**: ุงุณุชุนูู `/health` ููุฑุงูุจุฉ ุญุงูุฉ ุงูุฎุงุฏู (`server/app.js:147-155`).
- **ุงููููุฏ ุงูุฃูููุฉ**: ูุชู ุชุทุจูู ุงูู Rate Limiting ุนูู `/api/products` ูู ุฎูุงู `productLimiter` (`server/app.js:118-142`).
- **ุฅุฏุงุฑุฉ ุฃุฎุทุงุก ุงูุฎุงุฏู**: ุฌููุน ุงูุฃุฎุทุงุก ุชูุฑ ุนุจุฑ `handleServerError` ูุถูุงู ุฑุณุงุฆู ูุงุถุญุฉ (`server/app.js:180-183`).
